AstrBot Plugin: At Someone

让你的 AstrBot 拥有真正的社交“灵魂”——学会主动 @群友。

✨ 核心功能

主动 At：LLM 可以根据上下文，主动决定 @ 某位群成员。

智能解析：支持通过 User ID (推荐) 或 群名片/昵称 定位用户。

拟人化排版：自动处理 @ 后的空格排版，模拟真实人类发送习惯。

防断句优化：内置智能粘合逻辑，防止因 LLM 换行导致的 At 与文本分段发送问题。

🚀 使用方法

1. 安装插件

将本插件文件夹放入 AstrBot/data/plugins/ 目录下，并重载插件。

2. 配置提示词 (System Prompt)

为了让 LLM 学会使用此功能，必须在你的 Persona (人设) 或 System Prompt 中添加以下指令。

推荐指令：

### 🔧 工具能力：At 某人
在群聊中，当你需要明确呼叫某人或针对某人回复时，请使用格式：<@用户ID>
- 必须优先使用 <@用户ID> (如 <@123456>)，因为这是最准确的。
- 如果不知道 ID，可以使用 <@群名片>。
- 示例：
  User: 帮我问问队长在不在。
  Assistant: <@114514> 队长，出来挨打！


3. 效果展示

LLM 输出：<@123456>\n 你好呀！

实际效果：@某某 你好呀！ (作为单条消息发送，包含真实的 At 提醒)

⚠️ 注意事项

私聊环境下，插件会自动移除 <@...> 标签，仅保留文本。

如果 LLM 生成了不存在的用户 ID 或昵称，插件将按原样输出文本，方便你发现错误。
